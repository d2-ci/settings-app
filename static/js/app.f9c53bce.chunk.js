(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{1198:function(e,t,a){e.exports={replaceImageBtn:"FileUpload_replaceImageBtn__17HhQ"}},1237:function(e,t,a){e.exports={cancelBtn:"ClientForm_cancelBtn__1iLWM"}},1238:function(e,t,a){e.exports={editBtn:"ClientsList_editBtn__3Ak-n"}},1239:function(e,t,a){e.exports={wrapper:"OAuth2ClientEditor_wrapper__331Ju",addClientBtn:"OAuth2ClientEditor_addClientBtn__2romx"}},1240:function(e,t,a){e.exports={card:"SettingsFields_card__2_HSg"}},1242:function(e){e.exports=JSON.parse('{"Failed to load: {{error}}":"","No flag":"","Search settings":"","Replace image":"","Preview image":"","Preview of image":"","Upload image":"","Cancel upload":"","System default (fallback)":"","Set the main field value before adding a translation":"","Could not fetch localized settings":"","Select language":"","This client ID is already taken":"","Name":"","Required":"","Client ID":"","Client Secret":"","Grant Types":"","Password":"","Refresh token":"","Authorization code":"","One URL per line":"","Redirect URIs":"","This field should contain a list of URLs":"","Create new OAuth2 Client":"","Edit OAuth2 Client":"","Save":"","Cancel":"","Edit":"","Delete":"","OAuth2 client saved":"","Failed to save OAuth2 client":"","There are currently no OAuth2 clients registered":"","Add OAuth2 client":"","General settings":"","Analytics settings":"","Server settings":"","Appearance settings":"","Email settings":"","Access settings":"","Calendar settings":"","Data import settings":"","Synchronization settings":"","OAuth2 Clients":"","This setting will be overridden by the current user setting: {{settingName}}":"","This setting can be overridden by user settings":"","Search results":"","Maximum number of analytics records":"","Unlimited":"","Maximum number of SQL view records":"","Infrastructural indicators":"","Infrastructural data elements":"","Infrastructural period type":"","Daily":"","Weekly":"","Monthly":"","Bi-monthly":"","Quarterly":"","Six-monthly":"","Six-monthly April":"","Yearly":"","Financial-April":"","Financial-July":"","Financial-Oct":"","Feedback recipients":"","No message recipients":"","Max offline organisation unit levels":"","Data analysis std dev factor":"","Phone number area code":"","Enable multi-organisation unit forms":"","Acceptance required before approval":"","Gather analytical object statistics in dashboard views":"","Include passive dashboard views in usage analytics statistics":"","Default relative period for analysis":"","This month":"","Last month":"","This bi-month":"","Last bi-month":"","This quarter":"","Last quarter":"","This six-month":"","Last six-month":"","Months this year":"","Quarters this year":"","This year":"","Months last year":"","Quarters last year":"","Last year":"","Last 5 years":"","Last 12 months":"","Last 6 months":"","Last 3 months":"","Last 6 bi-months":"","Last 4 quarters":"","Last 2 six-months":"","This financial year":"","Last financial year":"","Last 5 financial years":"","This week":"","Last week":"","Last 4 weeks":"","Last 12 weeks":"","Last 52 weeks":"","Hide daily periods":"","Hidden period types in analytics apps":"","Hide weekly periods":"","Hide monthly periods":"","Hide bimonthly periods":"","Financial year relative period start month":"","April":"","July":"","October":"","Cache strategy":"","No cache":"","Cache for 15 minutes":"","Cache for 30 minutes":"","Cache for one hour":"","Cache until 6AM tomorrow":"","Cache for two weeks":"","Cacheability":"","Public":"","Private":"","Analytics cache mode":"","Progressive":"","Fixed":"","Max number of years to hide unapproved data in analytics":"","Never check approval":"","Check approval for all data":"","Current year only":"","Last 2 years":"","Last 3 years":"","Last 4 years":"","Last 6 years":"","Last 7 years":"","Last 8 years":"","Last 9 years":"","Last 10 years":"","Respect category option start and end date in analytics table export":"","Put analytics in maintenance mode":"","Caching factor":"","Number of database server CPUs":"","Automatic (detect based on web server)":"","System notifications email address":"","Google Analytics (Universal Analytics) key":"","Google Maps API key":"","Bing Maps API key":"","Application title":"","Application introduction":"","Application notification":"","Application left-side footer":"","Application right-side footer":"","Style":"","Start page":"","Help page link":"","Flag":"","Interface language":"","Database language":"","Property to display in analysis modules":"","Short name":"","Default digit group separator to display in analysis modules":"","Space":"","Comma":"","None":"","Require authority to add to view object lists":"","Custom login page logo":"","Custom top menu logo":"","Allow users to switch dashboard favorite view type":"","Allow users to open dashboard favorite in relevant app":"","Allow users to show dashboard favorite interpretations and details":"","Allow users to view dashboard items in fullscreen":"","Host name":"","Port":"","Username":"","TLS":"","Email sender":"","Send me a test email":"","Self registration account user role":"","Disable self registration":"","Self registration account organisation unit":"","Do not require recaptcha for self registration":"","Enable user account recovery":"","Lock user account temporarily after multiple failed login attempts":"","Allow users to grant own user roles":"","Allow assigning object to related objects during add or update":"","Require user account password change":"","Never":"","3 months":"","6 months":"","12 months":"","Enable password expiry alerts":"","Minimum characters in password":"","CORS whitelist":"","reCAPTCHA Site Key":"","reCAPTCHA Secret Key":"","Calendar":"","Coptic":"","Ethiopian":"","Gregorian":"","Islamic":"","ISO 8601":"","Julian":"","Nepali":"","Thai":"","Persian":"","Date format":"","Require periods to match period type of data set":"","Require data elements to be part of data set":"","Require category option combos to match category combo of data element":"","Require organisation units to match assignment of data set":"","Require attribute option combos to match category combo of data set":"","Require category option combo to be specified":"","Require attribute option combo to be specified":""}')},1244:function(e,t,a){"use strict";a.r(t);var s=a(7),n=a(1243),i=a(6),o=a(0),r=a.n(o),l=a(4),c=a(607),p=a(690),d=a.n(p),h=a(697),u=a.n(h),m=a(704),y=a.n(m),g=a(1),b=a.n(g),f=a(740),v=a.n(f),k=a(392),S=k.a.create(),E=a(317),T=a(587),A=a(348);const C=["general","server","appearance","email","access","calendar","import","sync","monitoring","oauth2"],w={general:{label:"general",icon:"settings",pageLabel:l.a.t("General settings"),settings:["keyAnalyticsMaxLimit","keySqlViewMaxLimit","infrastructuralIndicators","infrastructuralDataElements","infrastructuralPeriodType","keyAnalysisRelativePeriod","feedbackRecipients","offlineOrganisationUnitLevel","factorDeviation","phoneNumberAreaCode","multiOrganisationUnitForms","keyAcceptanceRequiredForApproval","keyGatherAnalyticalObjectStatisticsInDashboardViews","keyCountPassiveDashboardViewsInUsageAnalytics"]},analytics:{label:"analytics",icon:"equalizer",pageLabel:l.a.t("Analytics settings"),settings:["keyAnalysisRelativePeriod","keyHideDailyPeriods","keyHideWeeklyPeriods","keyHideMonthlyPeriods","keyHideBiMonthlyPeriods","analyticsFinancialYearStart","keyCacheStrategy","keyCacheability","keyAnalyticsCacheTtlMode","keyAnalyticsCacheProgressiveTtlFactor","keyIgnoreAnalyticsApprovalYearThreshold","keyRespectMetaDataStartEndDatesInAnalyticsTableExport","keyAnalyticsMaintenanceMode"]},server:{label:"server",icon:"business",pageLabel:l.a.t("Server settings"),settings:["keyDatabaseServerCpus","keySystemNotificationsEmail","googleAnalyticsUA","keyGoogleMapsApiKey","keyBingMapsApiKey"]},appearance:{label:"appearance",icon:"looks",pageLabel:l.a.t("Appearance settings"),settings:["localizedText","keyStyle","startModule","helpPageLink","keyFlag","keyUiLocale","keyDbLocale","keyAnalysisDisplayProperty","keyAnalysisDigitGroupSeparator","keyRequireAddToView","keyUseCustomLogoFront","keyUseCustomLogoBanner","keyDashboardContextMenuItemSwitchViewType","keyDashboardContextMenuItemOpenInRelevantApp","keyDashboardContextMenuItemShowInterpretationsAndDetails","keyDashboardContextMenuItemViewFullscreen"]},email:{label:"email",icon:"email",pageLabel:l.a.t("Email settings"),settings:["keyEmailHostName","keyEmailPort","keyEmailUsername","keyEmailPassword","keyEmailTls","keyEmailSender","emailTestButton"]},access:{label:"access",icon:"lock_open",pageLabel:l.a.t("Access settings"),settings:["selfRegistrationRole","selfRegistrationOrgUnit","keySelfRegistrationNoRecaptcha","keyAccountRecovery","keyLockMultipleFailedLogins","keyCanGrantOwnUserAuthorityGroups","keyAllowObjectAssignment","credentialsExpires","credentialsExpiryAlert","minPasswordLength","corsWhitelist","recaptchaSite","recaptchaSecret"]},calendar:{label:"calendar",icon:"date_range",pageLabel:l.a.t("Calendar settings"),settings:["keyCalendar","keyDateFormat"]},import:{label:"import",icon:"system_update_alt",pageLabel:l.a.t("Data import settings"),settings:["keyDataImportStrictPeriods","keyDataImportStrictDataElements","keyDataImportStrictCategoryOptionCombos","keyDataImportStrictOrganisationUnits","keyDataImportStrictAttributeOptionCombos","keyDataImportRequireCategoryOptionCombo","keyDataImportRequireAttributeOptionCombo"]},sync:{label:"synchronization",icon:"sync",pageLabel:l.a.t("Synchronization settings"),settings:["keyRemoteInstanceUrl","keyRemoteInstanceUsername","keyRemoteInstancePassword","keyMetadataDataVersioning"]},oauth2:{label:"oauth2_clients",icon:"vpn_lock",pageLabel:l.a.t("OAuth2 Clients"),authority:"F_OAUTH2_CLIENT_MANAGE",settings:["oauth2clients"]}},L=l.a.t("This setting can be overridden by user settings"),x=e=>new Intl.NumberFormat(l.a.language).format(e);var _={keyAnalyticsMaxLimit:{label:l.a.t("Maximum number of analytics records"),type:"dropdown",options:{5e4:x(5e4),1e5:x(1e5),2e5:x(2e5),0:l.a.t("Unlimited")}},keySqlViewMaxLimit:{label:l.a.t("Maximum number of SQL view records"),type:"dropdown",options:{"-1":l.a.t("Unlimited"),5e4:x(5e4),1e5:x(1e5),2e5:x(2e5)}},infrastructuralIndicators:{label:l.a.t("Infrastructural indicators"),configuration:!0,type:"dropdown",source:"indicatorGroups"},infrastructuralDataElements:{label:l.a.t("Infrastructural data elements"),configuration:!0,type:"dropdown",source:"dataElementGroups"},infrastructuralPeriodType:{label:l.a.t("Infrastructural period type"),configuration:!0,type:"dropdown",options:{Daily:l.a.t("Daily"),Weekly:l.a.t("Weekly"),Monthly:l.a.t("Monthly"),BiMonthly:l.a.t("Bi-monthly"),Quarterly:l.a.t("Quarterly"),SixMonthly:l.a.t("Six-monthly"),SixMonthlyApril:l.a.t("Six-monthly April"),Yearly:l.a.t("Yearly"),FinancialApril:l.a.t("Financial-April"),FinancialJuly:l.a.t("Financial-July"),FinancialOct:l.a.t("Financial-Oct")}},feedbackRecipients:{label:l.a.t("Feedback recipients"),configuration:!0,type:"dropdown",source:"userGroups",includeEmpty:!0,emptyLabel:l.a.t("No message recipients")},offlineOrganisationUnitLevel:{label:l.a.t("Max offline organisation unit levels"),configuration:!0,type:"dropdown",source:"organisationUnitLevels"},factorDeviation:{label:l.a.t("Data analysis std dev factor"),validators:["positive_number"]},phoneNumberAreaCode:{label:l.a.t("Phone number area code"),validators:["number"]},multiOrganisationUnitForms:{label:l.a.t("Enable multi-organisation unit forms"),type:"checkbox"},keyAcceptanceRequiredForApproval:{label:l.a.t("Acceptance required before approval"),type:"checkbox"},keyGatherAnalyticalObjectStatisticsInDashboardViews:{label:l.a.t("Gather analytical object statistics in dashboard views"),type:"checkbox"},keyCountPassiveDashboardViewsInUsageAnalytics:{label:l.a.t("Include passive dashboard views in usage analytics statistics"),type:"checkbox"},keyAnalysisRelativePeriod:{label:l.a.t("Default relative period for analysis"),type:"dropdown",options:{THIS_MONTH:l.a.t("This month"),LAST_MONTH:l.a.t("Last month"),THIS_BIMONTH:l.a.t("This bi-month"),LAST_BIMONTH:l.a.t("Last bi-month"),THIS_QUARTER:l.a.t("This quarter"),LAST_QUARTER:l.a.t("Last quarter"),THIS_SIX_MONTH:l.a.t("This six-month"),LAST_SIX_MONTH:l.a.t("Last six-month"),MONTHS_THIS_YEAR:l.a.t("Months this year"),QUARTERS_THIS_YEAR:l.a.t("Quarters this year"),THIS_YEAR:l.a.t("This year"),MONTHS_LAST_YEAR:l.a.t("Months last year"),QUARTERS_LAST_YEAR:l.a.t("Quarters last year"),LAST_YEAR:l.a.t("Last year"),LAST_5_YEARS:l.a.t("Last 5 years"),LAST_12_MONTHS:l.a.t("Last 12 months"),LAST_6_MONTHS:l.a.t("Last 6 months"),LAST_3_MONTHS:l.a.t("Last 3 months"),LAST_6_BIMONTHS:l.a.t("Last 6 bi-months"),LAST_4_QUARTERS:l.a.t("Last 4 quarters"),LAST_2_SIXMONTHS:l.a.t("Last 2 six-months"),THIS_FINANCIAL_YEAR:l.a.t("This financial year"),LAST_FINANCIAL_YEAR:l.a.t("Last financial year"),LAST_5_FINANCIAL_YEARS:l.a.t("Last 5 financial years"),THIS_WEEK:l.a.t("This week"),LAST_WEEK:l.a.t("Last week"),LAST_4_WEEKS:l.a.t("Last 4 weeks"),LAST_12_WEEKS:l.a.t("Last 12 weeks"),LAST_52_WEEKS:l.a.t("Last 52 weeks")}},keyHideDailyPeriods:{label:l.a.t("Hide daily periods"),sectionLabel:l.a.t("Hidden period types in analytics apps"),type:"checkbox"},keyHideWeeklyPeriods:{label:l.a.t("Hide weekly periods"),type:"checkbox"},keyHideMonthlyPeriods:{label:l.a.t("Hide monthly periods"),type:"checkbox"},keyHideBiMonthlyPeriods:{label:l.a.t("Hide bimonthly periods"),type:"checkbox"},analyticsFinancialYearStart:{label:l.a.t("Financial year relative period start month"),type:"dropdown",options:{FINANCIAL_YEAR_APRIL:l.a.t("April"),FINANCIAL_YEAR_JULY:l.a.t("July"),FINANCIAL_YEAR_OCTOBER:l.a.t("October")}},keyCacheStrategy:{label:l.a.t("Cache strategy"),type:"dropdown",options:{NO_CACHE:l.a.t("No cache"),CACHE_15_MINUTES:l.a.t("Cache for 15 minutes"),CACHE_30_MINUTES:l.a.t("Cache for 30 minutes"),CACHE_1_HOUR:l.a.t("Cache for one hour"),CACHE_6AM_TOMORROW:l.a.t("Cache until 6AM tomorrow"),CACHE_TWO_WEEKS:l.a.t("Cache for two weeks")}},keyCacheability:{label:l.a.t("Cacheability"),type:"dropdown",options:{PUBLIC:l.a.t("Public"),PRIVATE:l.a.t("Private")}},keyAnalyticsCacheTtlMode:{label:l.a.t("Analytics cache mode"),type:"dropdown",options:{PROGRESSIVE:l.a.t("Progressive"),FIXED:l.a.t("Fixed")}},keyIgnoreAnalyticsApprovalYearThreshold:{label:l.a.t("Max number of years to hide unapproved data in analytics"),type:"dropdown",options:{"-1":l.a.t("Never check approval"),0:l.a.t("Check approval for all data"),1:l.a.t("Current year only"),2:l.a.t("Last 2 years"),3:l.a.t("Last 3 years"),4:l.a.t("Last 4 years"),5:l.a.t("Last 5 years"),6:l.a.t("Last 6 years"),7:l.a.t("Last 7 years"),8:l.a.t("Last 8 years"),9:l.a.t("Last 9 years"),10:l.a.t("Last 10 years")}},keyRespectMetaDataStartEndDatesInAnalyticsTableExport:{label:l.a.t("Respect category option start and end date in analytics table export"),type:"checkbox"},keyAnalyticsMaintenanceMode:{label:l.a.t("Put analytics in maintenance mode"),type:"checkbox"},keyAnalyticsCacheProgressiveTtlFactor:{label:l.a.t("Caching factor"),type:"dropdown",options:{1:"1",2:"2",4:"4",8:"8",16:"16",32:"32",64:"64",128:"128",192:"192",256:"256",320:"320",512:"512",1024:"1024"},hideWhen:{settingsKey:"keyAnalyticsCacheTtlMode",settingsValue:"FIXED"}},keyDatabaseServerCpus:{label:l.a.t("Number of database server CPUs"),type:"dropdown",options:{0:l.a.t("Automatic (detect based on web server)"),1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",16:"16",32:"32"}},keySystemNotificationsEmail:{label:l.a.t("System notifications email address"),validators:["email"]},googleAnalyticsUA:{label:l.a.t("Google Analytics (Universal Analytics) key")},keyGoogleMapsApiKey:{label:l.a.t("Google Maps API key"),type:"password"},keyBingMapsApiKey:{label:l.a.t("Bing Maps API key"),type:"password"},localizedText:{type:"localizedAppearance",searchLabels:[l.a.t("Application title"),l.a.t("Application introduction"),l.a.t("Application notification"),l.a.t("Application left-side footer"),l.a.t("Application right-side footer")]},applicationTitle:{label:l.a.t("Application title"),appendLocale:!0,multiLine:!0},keyApplicationIntro:{label:l.a.t("Application introduction"),appendLocale:!0,multiLine:!0},keyApplicationNotification:{label:l.a.t("Application notification"),appendLocale:!0,multiLine:!0},keyApplicationFooter:{label:l.a.t("Application left-side footer"),appendLocale:!0,multiLine:!0},keyApplicationRightFooter:{label:l.a.t("Application right-side footer"),appendLocale:!0,multiLine:!0},keyStyle:{label:l.a.t("Style"),type:"dropdown",includeEmpty:!1,userSettingsOverride:!0,searchLabels:[l.a.t("Style"),L],source:"styles"},startModule:{label:l.a.t("Start page"),type:"dropdown",source:"startModules"},helpPageLink:{label:l.a.t("Help page link"),validators:["relative_url"]},keyFlag:{label:l.a.t("Flag"),type:"dropdown",source:"flags"},keyUiLocale:{label:l.a.t("Interface language"),type:"dropdown",userSettingsOverride:!0,searchLabels:[l.a.t("Style"),L],source:"uiLocales"},keyDbLocale:{label:l.a.t("Database language"),type:"dropdown",userSettingsOverride:!0,searchLabels:[l.a.t("Style"),L],source:"dbLocales"},keyAnalysisDisplayProperty:{label:l.a.t("Property to display in analysis modules"),type:"dropdown",userSettingsOverride:!0,searchLabels:[l.a.t("Style"),L],options:{name:l.a.t("Name"),shortName:l.a.t("Short name")}},keyAnalysisDigitGroupSeparator:{label:l.a.t("Default digit group separator to display in analysis modules"),type:"dropdown",options:{SPACE:l.a.t("Space"),COMMA:l.a.t("Comma"),NONE:l.a.t("None")}},keyRequireAddToView:{label:l.a.t("Require authority to add to view object lists"),type:"checkbox"},keyUseCustomLogoFront:{label:l.a.t("Custom login page logo"),type:"staticContent",name:"logo_front"},keyUseCustomLogoBanner:{label:l.a.t("Custom top menu logo"),type:"staticContent",name:"logo_banner"},keyDashboardContextMenuItemSwitchViewType:{label:l.a.t("Allow users to switch dashboard favorite view type"),type:"checkbox"},keyDashboardContextMenuItemOpenInRelevantApp:{label:l.a.t("Allow users to open dashboard favorite in relevant app"),type:"checkbox"},keyDashboardContextMenuItemShowInterpretationsAndDetails:{label:l.a.t("Allow users to show dashboard favorite interpretations and details"),type:"checkbox"},keyDashboardContextMenuItemViewFullscreen:{label:l.a.t("Allow users to view dashboard items in fullscreen"),type:"checkbox"},keyEmailHostName:{label:l.a.t("Host name")},keyEmailPort:{label:l.a.t("Port"),type:"dropdown",options:{587:"587",465:"465",25:"25"}},keyEmailUsername:{label:l.a.t("Username")},keyEmailPassword:{label:l.a.t("Password"),type:"password"},keyEmailTls:{label:l.a.t("TLS"),type:"checkbox"},keyEmailSender:{label:l.a.t("Email sender"),validators:["email"]},emailTestButton:{label:l.a.t("Send me a test email"),type:"postButton",uri:"/email/test"},selfRegistrationRole:{label:l.a.t("Self registration account user role"),configuration:!0,type:"dropdown",source:"userRoles",includeEmpty:!0,emptyLabel:l.a.t("Disable self registration")},selfRegistrationOrgUnit:{label:l.a.t("Self registration account organisation unit"),configuration:!0,type:"dropdown",source:"organisationUnits",includeEmpty:!0,emptyLabel:l.a.t("Disable self registration")},keySelfRegistrationNoRecaptcha:{label:l.a.t("Do not require recaptcha for self registration"),type:"checkbox"},keyAccountRecovery:{label:l.a.t("Enable user account recovery"),type:"checkbox"},keyLockMultipleFailedLogins:{label:l.a.t("Lock user account temporarily after multiple failed login attempts"),type:"checkbox"},keyCanGrantOwnUserAuthorityGroups:{label:l.a.t("Allow users to grant own user roles"),type:"checkbox"},keyAllowObjectAssignment:{label:l.a.t("Allow assigning object to related objects during add or update"),type:"checkbox"},credentialsExpires:{label:l.a.t("Require user account password change"),type:"dropdown",options:{0:l.a.t("Never"),3:l.a.t("3 months"),6:l.a.t("6 months"),12:l.a.t("12 months")}},credentialsExpiryAlert:{label:l.a.t("Enable password expiry alerts"),type:"checkbox"},minPasswordLength:{label:l.a.t("Minimum characters in password"),type:"dropdown",options:{8:"8",10:"10",12:"12",14:"14"}},corsWhitelist:{label:l.a.t("CORS whitelist"),configuration:!0,multiLine:!0,hintText:l.a.t("One URL per line"),validators:["url_array"]},recaptchaSite:{label:l.a.t("reCAPTCHA Site Key"),type:"password"},recaptchaSecret:{label:l.a.t("reCAPTCHA Secret Key"),type:"password"},keyCalendar:{label:l.a.t("Calendar"),type:"dropdown",options:{coptic:l.a.t("Coptic"),ethiopian:l.a.t("Ethiopian"),gregorian:l.a.t("Gregorian"),islamic:l.a.t("Islamic"),iso8601:l.a.t("ISO 8601"),julian:l.a.t("Julian"),nepali:l.a.t("Nepali"),thai:l.a.t("Thai"),persian:l.a.t("Persian")}},keyDateFormat:{label:l.a.t("Date format"),type:"dropdown",options:{"yyyy-MM-dd":"1981-03-31 (yyyy-MM-dd)","dd-MM-yyyy":"31-03-1981 (dd-MM-yyyy)"}},keyDataImportStrictPeriods:{label:l.a.t("Require periods to match period type of data set"),type:"checkbox"},keyDataImportStrictDataElements:{label:l.a.t("Require data elements to be part of data set"),type:"checkbox"},keyDataImportStrictCategoryOptionCombos:{label:l.a.t("Require category option combos to match category combo of data element"),type:"checkbox"},keyDataImportStrictOrganisationUnits:{label:l.a.t("Require organisation units to match assignment of data set"),type:"checkbox"},keyDataImportStrictAttributeOptionCombos:{label:l.a.t("Require attribute option combos to match category combo of data set"),type:"checkbox"},keyDataImportRequireCategoryOptionCombo:{label:l.a.t("Require category option combo to be specified"),type:"checkbox"},keyDataImportRequireAttributeOptionCombo:{label:l.a.t("Require attribute option combo to be specified"),type:"checkbox"},keyRemoteInstanceUrl:{label:"remote_server_url",validators:["url"]},keyRemoteInstanceUsername:{label:"remote_server_username"},keyRemoteInstancePassword:{label:"remote_server_password",type:"password"},keyMetadataDataVersioning:{label:"keyVersionEnabled",type:"metadataSettings"},keyVersionEnabled:{label:"keyVersionEnabled",type:"checkbox"},keyStopMetadataSync:{label:"keyStopMetadataSync",type:"checkbox"},createVersionButton:{label:"create_metadata_version",type:"postButton",uri:"/metadata/version/create"},oauth2clients:{type:"oauth2clients",searchLabels:["oauth2_clients","password","refresh_token","authorization_code"]}},O=k.a.create();const R=T.a.createActionsFromNames(["load","setCategory","saveKey","searchSettings","showSnackbarMessage"]);R.saveKey.subscribe((e=>{const[t,a,s]=e.data,n=_[t];Object(E.getInstance)().then((e=>{const i=n.appendLocale&&s;i?((e,t,a,s)=>{const n=`/systemSettings/${t}?value=${a}${s?`&locale=${s}`:""}`;e.Api.getApi().post(n).then((()=>{R.showSnackbarMessage(e.i18n.getTranslation("settings_updated"))})).catch((e=>{console.error("Failed to save localized setting:",e)}))})(e,t,a,s):n.configuration?((e,t,a)=>{e.system.configuration.set(t,a).then((()=>{R.showSnackbarMessage(e.i18n.getTranslation("settings_updated"))})).catch((e=>{console.error("Failed to save configuration:",e)}))})(e,t,a):((e,t,a)=>{e.system.settings.set(t,a).then((()=>{R.showSnackbarMessage(e.i18n.getTranslation("settings_updated"))})).catch((e=>{console.error("Failed to save setting:",e)}))})(e,t,a),i||(O.state[t]=a,O.setState(O.state))}))}));const M=A.Observable.fromPromise(new Promise((e=>{R.load.subscribe((t=>{Object(E.getInstance)().then((a=>{Promise.all([a.system.settings.all(),a.system.configuration.all(!0===t.data)]).then((e=>{const t=Object.keys(e[1]).filter((e=>"systemId"!==e)).map((t=>({key:t,value:e[1][t]}))).reduce(((e,t)=>{let a=t.value;return null===a||"null"===a||void 0===a?a="null":Object.hasOwnProperty.call(a,"id")&&(a=a.id),e[t.key]=a,e}),{});t.corsWhitelist=(e[1].corsWhitelist||[]).filter((e=>e.trim().length>0)).sort().join("\n"),Object.keys(e[0]).forEach((t=>{const a=e[0][t];e[0][t]=null===a||isNaN(a)?a:a.toString()})),O.setState(Object.assign({},e[0],t))}),(e=>{console.error("Failed to load system settings:",e)}));const s=Object.keys(w).filter((e=>!w[e].authority||a.currentUser.authorities.has(w[e].authority))).map((e=>w[e].settings)).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>_[t]?_[t].searchLabels?e.concat(_[t].searchLabels.filter((e=>a.i18n.isTranslated(e))).map((e=>[a.i18n.getTranslation(e),t]))):e.concat([[a.i18n.getTranslation(_[t].label),t]]):e),[]);e(s)}))}))})));let I;R.searchSettings.distinctUntilChanged().debounceTime(150).map((e=>e.data.trim().split(/\s+/).filter((e=>e.length>0)))).do((e=>{I=e,0===e.length&&R.setCategory("general")})).filter((e=>e.length)).map((e=>{return t=e,M.flatMap((e=>A.Observable.from(e))).filter((e=>t.every((t=>e[0].toLowerCase().includes(t.toLowerCase()))))).map((([,e])=>e)).distinct().reduce(((e,t)=>e.concat(t)),[]).map((e=>(1===t.length&&Object.hasOwnProperty.call(_,t[0])&&e.push(t[0]),e)));var t})).concatAll().subscribe((e=>{R.setCategory({key:"search",settings:e,searchTerms:I})}));var N=R,F=a(372),P=a(589),U=a(388),D=a.n(U),V=a(423),j=a.n(V);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const q={color:"rgba(0, 0, 0, 0.3)",fontSize:"12px",margin:"16px 0 6px 0"};class B extends r.a.Component{render(){const{errorText:e,errorStyle:t,onChange:a,sectionLabel:s,value:n,...i}=this.props;return r.a.createElement("div",{style:{marginTop:12,marginBottom:12}},s&&r.a.createElement("p",{style:q},s),r.a.createElement(j.a,H({onCheck:a,checked:"true"===n},i)))}}B.defaultProps={value:"false"};var G=B,W=a(1184),K=a.n(W),z=a(1190),Y=a.n(z);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class J extends r.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e,t,a){this.props.onChange({target:{value:a}})}renderMenuItems(e){return this.props.includeEmpty&&(e=[{id:"null",displayName:this.props.emptyLabel},...e]),e.map((e=>r.a.createElement(K.a,{key:e.id,value:e.id,primaryText:e.displayName})))}render(){const{onFocus:e,onBlur:t,onChange:a,value:s,disabled:n,menuItems:i,includeEmpty:o,emptyLabel:l,noOptionsLabel:c,isRequired:p,...d}=this.props,h=i.length>0;return r.a.createElement(Y.a,$({value:h?this.props.value:1,onChange:this.handleChange,disabled:!h||n},d),h?this.renderMenuItems(i):r.a.createElement(K.a,{value:1,primaryText:this.props.noOptionsLabel||"-"}))}}Q(J,"propTypes",{value:b.a.string.isRequired,defaultValue:b.a.oneOfType([b.a.string,b.a.number,b.a.bool]),emptyLabel:b.a.string,includeEmpty:b.a.bool,menuItems:b.a.oneOfType([b.a.array,b.a.object]),noOptionsLabel:b.a.string,onBlur:b.a.func,onChange:b.a.func,onFocus:b.a.func}),Q(J,"defaultProps",{defaultValue:"",includeEmpty:!1,emptyLabel:"",menuItems:[],noOptionsLabel:"",onFocus:void 0,onBlur:void 0,onChange:void 0});var X=J,Z=a(347),ee=a(454),te=a.n(ee),ae=a(455),se=a.n(ae),ne=a(315);const ie={spacing:se.a,fontFamily:"Roboto, sans-serif",palette:{primary1Color:Z.blue500,primary2Color:Z.blue700,primary3Color:Z.blue100,accent1Color:Z.orange500,accent2Color:Z.grey100,accent3Color:Z.orangeA200,textColor:Z.darkBlack,alternateTextColor:Z.white,canvasColor:Z.white,borderColor:Z.grey400,disabledColor:Object(ne.fade)(Z.darkBlack,.3)}},oe=te()(ie);var re=Object.assign({},oe,{forms:{minWidth:350,maxWidth:750},formInput:{fontWeight:100}}),le=a(1198),ce=a.n(le);function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const de=({isEnabled:e,name:t,showDialog:a,onUpload:n,onPreview:o})=>{const c={maxWidth:"100%",maxHeight:"70vh",backgroundColor:"var(--colors-grey700)",color:"white"},{baseUrl:p,apiVersion:d}=Object(s.c)(),h=`${[p,"api",d,"staticContent",t].join("/")}?at=${new Date}`;return e?r.a.createElement("div",null,r.a.createElement(i.c,{secondary:!0,small:!0,className:ce.a.replaceImageBtn,onClick:n},l.a.t("Replace image")),r.a.createElement(i.c,{small:!0,onClick:o},l.a.t("Preview image")),a&&r.a.createElement(i.m,{onClose:o},r.a.createElement(i.p,null,l.a.t("Preview image")),r.a.createElement(i.o,null,r.a.createElement(i.e,null,r.a.createElement("img",{style:c,src:h,alt:l.a.t("Preview of image")}))))):r.a.createElement(i.c,{primary:!0,small:!0,onClick:n},l.a.t("Upload image"))};class he extends r.a.Component{constructor(...e){super(...e),pe(this,"state",{isEnabled:this.props.isEnabled,uploading:!1,progress:void 0,showDialog:!1}),pe(this,"onClick",(e=>{this.fileInput&&!this.state.uploading?this.fileInput.click(e):this.state.uploading&&(this.xhr.abort(),this.setState({uploading:!1,progress:void 0}))})),pe(this,"onPreviewClick",(()=>{this.setState((e=>({showDialog:!e.showDialog})))})),pe(this,"onToggle",(e=>{this.props.onChange({target:{value:e.target.checked}})})),pe(this,"onUpload",(async e=>{if(0===e.target.files.length)return;this.setState({uploading:!0,progress:void 0});const t=(await Object(E.getInstance)()).Api.getApi(),a=new XMLHttpRequest;a.upload.onprogress=e=>{e.lengthComputable?this.setState({progress:e.loaded/e.total*100}):this.setState({progress:void 0})},this.xhr=a;const s=new FormData;s.append("file",e.target.files[0]);try{await t.post(["staticContent",this.props.name].join("/"),s),this.props.onChange({target:{value:!0}}),this.setState({uploading:!1,progress:void 0,isEnabled:!0})}catch{this.props.onChange({target:{value:!1}}),this.setState({uploading:!1,progress:void 0,isEnabled:!1})}})),pe(this,"renderUploading",(()=>r.a.createElement("div",null,r.a.createElement(i.c,{onClick:this.onClick},l.a.t("Cancel upload")),r.a.createElement("div",{style:{position:"absolute",left:0,right:0,zIndex:1}},this.state.progress?r.a.createElement(i.l,{amount:this.state.progress}):r.a.createElement(i.f,null)))))}render(){const{onFocus:e,onBlur:t,onChange:a,...s}=this.props;return r.a.createElement("div",{style:{position:"relative",display:"block",whiteSpace:"nowrap"}},r.a.createElement("div",{style:{display:"inline-block",whiteSpace:"nowrap",paddingRight:8,paddingTop:8,paddingBottom:8}},r.a.createElement(j.a,{label:this.props.label,onCheck:this.onToggle,disabled:!this.state.isEnabled,labelStyle:{color:re.rawTheme.palette.textColor},checked:this.props.value})),r.a.createElement("div",{style:{display:"inline-block",position:"absolute",top:2}},this.state.uploading?this.renderUploading():r.a.createElement(de,{isEnabled:this.state.isEnabled,name:this.props.name,showDialog:this.state.showDialog,onUpload:this.onClick,onPreview:this.onPreviewClick}),r.a.createElement("input",{type:"file",style:{visibility:"hidden",display:"none"},ref:e=>{this.fileInput=e},onChange:this.onUpload})))}}pe(he,"propTypes",{isEnabled:b.a.bool.isRequired,label:b.a.string.isRequired,name:b.a.oneOf(["logo_front","logo_banner"]).isRequired,value:b.a.bool.isRequired,onBlur:b.a.func,onChange:b.a.func,onFocus:b.a.func});var ue=he,me=a(389),ye=a.n(me);function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fe={fontSize:"12px",color:"rgba(0, 0, 0, 0.3)",margin:"-4px 0 0"};class ve extends r.a.Component{constructor(e){super(e),be(this,"state",{value:this.props.value}),this.onChange=this.onChange.bind(this)}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.value})}onChange(e){this.setState({value:e.target.value})}render(){const{changeEvent:e,isRequired:t,defaultValue:a,helpText:s,...n}=this.props,i={lineHeight:this.props.multiLine?"48px":"12px",marginTop:this.props.multiLine?-16:0};return r.a.createElement("div",null,r.a.createElement(ye.a,ge({errorStyle:i},n,{value:this.state.value,onChange:this.onChange})),s&&r.a.createElement("p",{style:fe},s))}}be(ve,"propTypes",{helpText:b.a.node,multiLine:b.a.bool,value:b.a.string}),be(ve,"defaultProps",{value:"",multiLine:!1,helpText:""});var ke=ve,Se=a(594),Ee=a.n(Se);function Te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ae=l.a.t("System default (fallback)"),Ce={container:{padding:"0 var(--spacers-dp16) var(--spacers-dp8)"},field:{width:"100%"},loaderWrap:{textAlign:"center",padding:12},error:{color:"red",padding:12},clickableHelpText:{color:"#3162C5",textDecoration:"underline",cursor:"pointer"}},we="@@__SYSTEM_DEFAULT__@@",Le=["applicationTitle","keyApplicationIntro","keyApplicationNotification","keyApplicationFooter","keyApplicationRightFooter"];class xe extends r.a.Component{static getLocaleName(e){return S.state&&S.getState().uiLocales.filter((t=>t.id===e)).map((e=>e.displayName)).pop()||""}constructor(e,t){super(e,t),Te(this,"switchToDefaultLocale",(()=>{this.handleChange({target:{value:we}})})),Te(this,"createFieldHelpTextProps",(e=>{const t=O.state[e],{locale:a}=this.state;return a===we?null:t?{helpText:`${Ae}: ${t}`}:{disabled:!0,helpText:r.a.createElement("span",{style:Ce.clickableHelpText,onClick:this.switchToDefaultLocale},l.a.t("Set the main field value before adding a translation"))}})),this.state={locale:O.state&&O.state.keyUiLocale,localeName:O.state&&xe.getLocaleName(O.state.keyUiLocale),settings:null,error:!1},this.handleChange=this.handleChange.bind(this),this.saveSettingsKey=this.saveSettingsKey.bind(this)}componentDidMount(){this.getAppearanceSettings(),this.settingsStoreSubscription=O.subscribe((()=>{this.setState({locale:O.state.keyUiLocale,localeName:xe.getLocaleName(O.state.keyUiLocale)})}))}componentWillUnmount(){this.settingsStoreSubscription&&this.settingsStoreSubscription.unsubscribe()}getAppearanceSettings(e){const t=e||this.state.locale;(t===we?Promise.resolve(Le.map((e=>O.state[e]))):this.fetchLocalizedAppearanceSettings(t)).then((e=>{const t=Le.reduce(((t,a,s)=>(t[a]=e[s],t)),{});this.setState({settings:t,error:!1})})).catch((()=>{this.setState({error:!0,settings:null})}))}fetchLocalizedAppearanceSettings(e){const t=this.context.d2.Api.getApi();return Promise.all(Le.map((a=>t.get(`systemSettings/${a}`,{locale:e}).then((e=>e[a])))))}handleChange(e){const t=e.target.value;this.setState({locale:t,localeName:xe.getLocaleName(t),settings:null}),this.getAppearanceSettings(t)}saveSettingsKey(e,t){this.setState({settings:{...this.state.settings,[e]:t}});const a=this.state.locale===we?null:this.state.locale;N.saveKey(e,t,a)}renderLocalizedAppearanceFields(){if(!this.state.settings&&!this.state.error)return r.a.createElement("div",{style:Ce.loaderWrap},r.a.createElement(Ee.a,null));if(this.state.error)return r.a.createElement("div",{style:Ce.error},l.a.t("Could not fetch localized settings"));const e=Le.map((e=>({name:e,value:this.state.settings[e]||"",component:ke,props:{floatingLabelText:`${_[e].label} \u2013 ${this.state.localeName||Ae}`,changeEvent:"onBlur",style:Ce.field,multiLine:!0,...this.createFieldHelpTextProps(e)}})));return r.a.createElement(F.a,{fields:e,onUpdateField:this.saveSettingsKey})}render(){const e={id:we,displayName:Ae},t=S.getState(),a=[e,...t&&t.uiLocales||[]];return r.a.createElement(i.d,null,r.a.createElement("div",{style:Ce.container},r.a.createElement(X,{menuItems:a,value:this.state.locale||"",floatingLabelText:l.a.t("Select language"),onChange:this.handleChange}),this.state.locale&&this.renderLocalizedAppearanceFields()))}}xe.contextTypes={d2:b.a.object.isRequired};var _e=xe,Oe=a(1199),Re=a(1230),Me=a(1234),Ie=a.n(Me);a(1236);class Ne extends r.a.Component{constructor(e,t){super(e,t),this.state={metadataVersions:[],selectedTransactionType:"BEST_EFFORT",masterVersionName:null,lastFailedTime:null,hqInstanceUrl:null,isVersioningEnabled:!1,remoteVersionName:null,isLocalInstance:!1,hasVersions:!1,isTaskRunning:!1},this.d2=t.d2,this.getTranslation=t.d2.i18n.getTranslation.bind(t.d2.i18n),this.onSelectTransactionType=this.onSelectTransactionType.bind(this),this.syncVersions=this.syncVersions.bind(this),this.syncSettings=this.syncSettings.bind(this),this.createVersion=this.createVersion.bind(this),this.onToggleVersioning=this.onToggleVersioning.bind(this),this.onToggleStopSync=this.onToggleStopSync.bind(this),this.saveSettingsKey="keyVersionEnabled",this.stopMetadataSyncKey="keyStopMetadataSync",this.createVersionKey="createVersionButton"}componentDidMount(){this.subscriptions=[],this.subscriptions.push(O.subscribe((e=>{this.setState({isVersioningEnabled:"true"===e[this.saveSettingsKey]},(()=>{this.syncVersions(),this.syncVersions().then(this.syncSettings)}))})))}componentWillUnmount(){this.subscriptions.forEach((e=>e.unsubscribe()))}onSelectTransactionType(e,t){this.setState({selectedTransactionType:t})}onToggleVersioning(e,t){N.saveKey(this.saveSettingsKey,t?"true":"false")}onToggleStopSync(e,t){N.saveKey(this.stopMetadataSyncKey,t?"true":"false")}createVersion(){const e=_[this.createVersionKey];this.setState({isTaskRunning:!0}),this.d2.Api.getApi().post(`${e.uri}?type=${this.state.selectedTransactionType}`).then((()=>(this.setState({isTaskRunning:!1}),N.load(!0),N.showSnackbarMessage(this.getTranslation("version_created")),Promise.resolve()))).then(this.sync).catch((()=>(this.setState({isTaskRunning:!1}),N.showSnackbarMessage(this.getTranslation("version_not_created")),Promise.resolve())))}syncSettings(){this.d2.Api.getApi().get("/systemSettings").then((e=>(this.setState({lastFailedTime:e.keyMetadataLastFailedTime?e.keyMetadataLastFailedTime:null,isVersioningEnabled:e.keyVersionEnabled,hqInstanceUrl:e.keyRemoteInstanceUrl,remoteVersionName:e.keyRemoteMetadataVersion,lastFailedVersion:e.keyMetadataFailedVersion?e.keyMetadataFailedVersion:null,isSchedulerEnabled:void 0!==e.keySchedTasks}),void 0!==this.state.hqInstanceUrl&&0!==this.state.hqInstanceUrl.length?this.setState({isLocalInstance:!0,masterVersionName:this.state.remoteVersionName,isLastSyncValid:null!=this.state.lastFailedTime}):this.setState({isLocalInstance:!1,masterVersionName:void 0!==this.state.metadataVersions&&0!==this.state.metadataVersions.length?this.state.metadataVersions[0].name:null}),Promise.resolve()))).catch((()=>(N.showSnackbarMessage(this.getTranslation("error_fetching_settings")),Promise.resolve())))}syncVersions(){return!0===this.state.isVersioningEnabled?this.d2.Api.getApi().get("/metadata/versions").then((e=>{const t=e.metadataversions.sort(((e,t)=>e.created<t.created?1:e.created>t.created?-1:0));return t.forEach((e=>{e.importdate=e.importdate?new Date(e.importdate).toLocaleString():"NA"})),this.setState({metadataVersions:t,hasVersions:void 0!==t&&0!==t.length}),Promise.resolve()})).catch((()=>(this.setState({hasVersions:!1}),Promise.resolve()))):Promise.resolve()}renderVersionList(){const e={inlineRight:{display:"inline-block",float:"right"},visible:{display:"block",paddingTop:"2rem"},hidden:{display:"none"},inlineProgressIcon:{display:"inline-block",top:"-7px",float:"left"}},t=(e,t=(e=>e))=>({rowIndex:a,...s})=>r.a.createElement(Oe.Cell,s,t(this.state.metadataVersions[a][e]));return r.a.createElement("div",null,r.a.createElement("h3",null,this.getTranslation("create_metadata_version")),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(Re.RadioButtonGroup,{name:"version_types",onChange:this.onSelectTransactionType,defaultSelected:"BEST_EFFORT",style:{display:"flex"}},r.a.createElement(Re.RadioButton,{value:"BEST_EFFORT",label:this.getTranslation("version_type_best_effort"),disabled:this.state.isTaskRunning}),r.a.createElement(Re.RadioButton,{value:"ATOMIC",label:this.getTranslation("version_type_atomic"),disabled:this.state.isTaskRunning}))),r.a.createElement("div",{style:e.inlineRight},this.state.isTaskRunning&&r.a.createElement(Ee.a,{style:e.inlineProgressIcon,size:.5}),r.a.createElement(Ie.a,{label:this.getTranslation("create_metadata_version"),onClick:this.createVersion,disabled:this.state.isTaskRunning}))),r.a.createElement("div",{style:this.state.hasVersions?e.visible:e.hidden},r.a.createElement("div",{style:{display:"inline-block",float:"left"}},r.a.createElement("span",{style:{fontSize:"1.17em",fontWeight:"bold",marginRight:8}},this.getTranslation("master_version"),":"),this.state.masterVersionName||this.getTranslation("none")),r.a.createElement("div",{style:this.state.isLocalInstance?e.inlineRight:e.hidden},r.a.createElement("div",{style:this.state.isLastSyncValid?e.inlineRight:e.hidden},r.a.createElement("span",{style:{fontStyle:"italic"}},this.getTranslation("last_sync_attempt"),":"),r.a.createElement("span",null,this.state.lastFailedVersion),r.a.createElement("span",null," ","|"," ",r.a.createElement("span",{style:{color:"red"}},this.getTranslation("failed")),"|"," ",new Date(this.state.lastFailedTime).toLocaleString())))),r.a.createElement("div",{style:this.state.isLocalInstance?e.visible:e.hidden},r.a.createElement(Oe.Table,{rowHeight:50,rowsCount:this.state.metadataVersions.length,width:670,maxHeight:300,headerHeight:50},r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"Version"),cell:t("name"),width:135}),r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"When"),cell:t("created",(e=>new Date(e).toLocaleString())),width:205}),r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"Type"),cell:t("type"),width:145}),r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"Last Sync"),cell:t("importdate"),width:185}))),r.a.createElement("div",{style:this.state.isLocalInstance?e.hidden:e.visible},r.a.createElement(Oe.Table,{rowHeight:50,rowsCount:this.state.metadataVersions.length,width:670,maxHeight:300,headerHeight:50},r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"Version"),cell:t("name"),width:190}),r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"When"),cell:t("created"),width:280}),r.a.createElement(Oe.Column,{header:r.a.createElement(Oe.Cell,null,"Type"),cell:t("type"),width:200}))),r.a.createElement("div",{style:this.state.hasVersions?e.hidden:e.visible},r.a.createElement("h4",null,this.getTranslation("no_versions_exist"))))}render(){const e="en"===this.state.locale?"":this.state.locale,t=[{name:"keyVersionEnabled",value:O.state&&O.state[this.saveSettingsKey+e]||"",component:G,props:{label:this.getTranslation("keyVersionEnabled"),checked:"true"===(O.state&&O.state[this.saveSettingsKey]),onCheck:this.onToggleVersioning,disabled:this.state.isTaskRunning}},{name:"keyStopMetadataSync",value:O.state&&O.state[this.stopMetadataSyncKey+e]||"",component:G,props:{label:this.getTranslation("keyStopMetadataSync"),checked:"true"===(O.state&&O.state[this.stopMetadataSyncKey]),onCheck:this.onToggleStopSync}}];return r.a.createElement("div",{style:{paddingTop:"2rem"}},r.a.createElement("h2",null,this.getTranslation("metadata_versioning")),r.a.createElement(F.a,{fields:t,onUpdateField:N.saveKey}),!0===this.state.isVersioningEnabled?this.renderVersionList():null)}}Ne.contextTypes={d2:b.a.object.isRequired};var Fe=Ne;function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ue extends r.a.Component{constructor(e){super(e),Pe(this,"state",{values:this.props.items.reduce(((e,t)=>(t.value&&e.push(t.name),e)),[])}),this.onToggle=this.onToggle.bind(this)}onToggle(e,t,a){this.setState((t=>(a?-1===t.values.indexOf(e)&&t.values.push(e):-1!==t.values.indexOf(e)&&t.values.splice(t.values.indexOf(e),1),t)),(()=>{this.props.onChange({target:{value:this.state.values}})}))}render(){const e=Object.assign({},this.context.muiTheme.forms,this.props.style);return r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:16,marginBottom:8}},this.props.label),this.props.items.map((t=>{const a=this.onToggle.bind(null,t.name);return r.a.createElement(j.a,{key:t.name,name:t.name,value:"true",defaultChecked:!0===t.value,label:t.text,onCheck:a,style:e,labelPosition:"right"})})))}}Pe(Ue,"propTypes",{label:b.a.string.isRequired,onChange:b.a.func.isRequired,items:b.a.arrayOf(b.a.shape({name:b.a.string.isRequired,text:b.a.string.isRequired,value:b.a.bool})),style:b.a.object}),Pe(Ue,"defaultProps",{items:[],style:{}}),Ue.contextTypes={muiTheme:b.a.object};var De=Ue,Ve=a(1237),je=a.n(Ve);const He=re.forms;He.width="100%";const qe=async e=>{const t=await Object(E.getInstance)();if((await t.models.oAuth2Clients.list({paging:!1,filter:[`cid:eq:${e}`]})).size>0)throw l.a.t("This client ID is already taken")};var Be=({clientModel:e,onUpdate:t,onSave:a,onCancel:s})=>{const n=(e&&e.grantTypes||[]).reduce(((e,t)=>(e[t]=!0,e)),{}),o=[{name:"name",value:e.name,component:ke,props:{floatingLabelText:l.a.t("Name"),style:He,changeEvent:"onBlur"},validators:[{validator:P.a,message:l.a.t("Required")}]},{name:"cid",value:e.cid,component:ke,props:{floatingLabelText:l.a.t("Client ID"),style:He,changeEvent:"onBlur"},validators:[{validator:P.a,message:l.a.t("Required")},{validator:e=>e.toString().trim().length>0,message:l.a.t("Required")}],asyncValidators:[qe]},{name:"secret",value:e&&e.secret,component:ke,props:{floatingLabelText:l.a.t("Client Secret"),disabled:!0,style:He}},{name:"grantTypes",component:De,style:He,props:{label:l.a.t("Grant Types"),items:[{name:"password",text:l.a.t("Password"),value:n.password},{name:"refresh_token",text:l.a.t("Refresh token"),value:n.refresh_token},{name:"authorization_code",text:l.a.t("Authorization code"),value:n.authorization_code}]}},{name:"redirectUris",value:(e.redirectUris||[]).join("\n"),component:ke,props:{hintText:l.a.t("One URL per line"),floatingLabelText:l.a.t("Redirect URIs"),multiLine:!0,style:He,changeEvent:"onBlur"},validators:[{validator:P.b,message:l.a.t("This field should contain a list of URLs")}]}],c=void 0===e.id?l.a.t("Create new OAuth2 Client"):l.a.t("Edit OAuth2 Client");return r.a.createElement(i.m,{onClose:s},r.a.createElement(i.p,null,c),r.a.createElement(i.o,null,r.a.createElement(F.a,{fields:o,onUpdateField:t}),r.a.createElement("div",{style:{marginTop:"1rem"}},r.a.createElement(i.c,{primary:!0,onClick:a},l.a.t("Save")),r.a.createElement(i.c,{secondary:!0,onClick:s,className:je.a.cancelBtn},l.a.t("Cancel")))))},Ge=a(1238),We=a.n(Ge);var Ke=({clients:e,onClientEdit:t,onClientDelete:a})=>r.a.createElement(i.q,null,r.a.createElement(i.u,null,r.a.createElement(i.w,null,r.a.createElement(i.t,null,l.a.t("Name")),r.a.createElement(i.t,null,l.a.t("Password")),r.a.createElement(i.t,null,l.a.t("Refresh token")),r.a.createElement(i.t,null,l.a.t("Authorization code")),r.a.createElement(i.t,null))),r.a.createElement(i.r,null,e.map((e=>r.a.createElement(i.v,{key:e.authorization_code},r.a.createElement(i.s,null,e.name),r.a.createElement(i.s,null,e.password),r.a.createElement(i.s,null,e.refresh_token),r.a.createElement(i.s,null,e.authorization_code),r.a.createElement(i.s,null,r.a.createElement(i.c,{small:!0,primary:!0,className:We.a.editBtn,onClick:()=>t(e)},l.a.t("Edit")),r.a.createElement(i.c,{small:!0,destructive:!0,onClick:()=>a(e)},l.a.t("Delete")))))))),ze=k.a.create();const Ye=T.a.createActionsFromNames(["load","delete"]);Ye.load.subscribe((()=>{Object(E.getInstance)().then((e=>{e.models.oAuth2Client.list({paging:!1,fields:":all",order:"displayName"}).then((t=>{const a=e.i18n.getTranslation("yes"),s=e.i18n.getTranslation("no");ze.setState(t.toArray().map((e=>Object.assign(e,{password:-1!==e.grantTypes.indexOf("password")?a:s,refresh_token:-1!==e.grantTypes.indexOf("refresh_token")?a:s,authorization_code:-1!==e.grantTypes.indexOf("authorization_code")?a:s}))))}))}))})),Ye.delete.subscribe((e=>{e.data.delete().then((()=>{Ye.load(),Object(E.getInstance)().then((e=>{N.showSnackbarMessage(e.i18n.getTranslation("oauth2_client_deleted"))}))})).catch((e=>{console.error("Error when deleting OAuth2 client:",e),Object(E.getInstance)().then((e=>{N.showSnackbarMessage(e.i18n.getTranslation("failed_to_save_oauth2_client"))}))}))}));var $e=Ye,Qe=a(1239),Je=a.n(Qe);function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ze extends o.Component{constructor(...e){super(...e),Xe(this,"state",{showForm:!1,saving:!1}),Xe(this,"cancelAction",(()=>{this.clientModel=void 0,$e.load(),this.setState({showForm:!1})})),Xe(this,"newAction",(()=>{Object(E.getInstance)().then((e=>{this.clientModel=e.models.oAuth2Client.create(),this.clientModel.secret=function(){const e="0123456789abcdef";let t="";for(let a=0;a<32;a++)t+=e.charAt(Math.random()*e.length),8!==a&&12!==a&&16!==a&&20!==a||(t+="-");return t}(),this.setState({showForm:!0})}))})),Xe(this,"editAction",(e=>{this.clientModel=e,this.setState({showForm:!0})})),Xe(this,"deleteAction",(e=>{this.setState({showForm:!1,saving:!0}),$e.delete(e.id?e:this.clientModel),this.clientModel=void 0})),Xe(this,"saveAction",(()=>{this.clientModel.name=this.clientModel.name||"",this.clientModel.cid=this.clientModel.cid||"",this.setState({saving:!0}),this.clientModel.save().then((e=>{if("OK"!==e.status)throw new Error(e);N.showSnackbarMessage(l.a.t("OAuth2 client saved")),$e.load(),this.setState({showForm:!1,saving:!1})})).catch((()=>{N.showSnackbarMessage(l.a.t("Failed to save OAuth2 client")),this.setState({saving:!1})}))})),Xe(this,"formUpdateAction",((e,t)=>{let a=t;"redirectUris"===e&&(a=t.split("\n").filter((e=>e.trim().length>0))),this.clientModel[e]=a,this.forceUpdate()}))}componentDidMount(){this.subscriptions=[],this.subscriptions.push(ze.subscribe((()=>{this.forceUpdate()}))),this.subscriptions.push($e.delete.subscribe((()=>{this.setState({saving:!1})}))),$e.load()}componentWillUnmount(){this.subscriptions.forEach((e=>{e.unsubscribe()}))}render(){const e=ze.state;return!e||this.state.saving?r.a.createElement(i.e,null,r.a.createElement(i.f,null)):0===e.length?r.a.createElement(i.e,null,r.a.createElement("p",null,l.a.t("There are currently no OAuth2 clients registered"))):r.a.createElement("div",{className:Je.a.wrapper},r.a.createElement(Ke,{clients:e,onClientEdit:this.editAction,onClientDelete:this.deleteAction}),r.a.createElement(i.c,{primary:!0,className:Je.a.addClientBtn,onClick:this.newAction},l.a.t("Add OAuth2 client")),this.state.showForm&&r.a.createElement(Be,{clientModel:this.clientModel,onUpdate:this.formUpdateAction,onSave:this.saveAction,onCancel:this.cancelAction}))}}var et=Ze,tt=a(1240),at=a.n(tt);const st={header:{fontSize:24,fontWeight:500,color:"var(--colors-grey900)",padding:"24px 0 12px 16px"},noHits:{padding:"1rem",marginTop:"1rem",fontWeight:300},userSettingsOverride:{color:re.rawTheme.palette.primary1Color,position:"absolute",right:0,top:24},menuIcon:{color:"#757575"},menuLabel:{position:"relative",top:-6,marginLeft:16}};function nt(e){if(!e||!e.hideWhen)return{};const{settingsKey:t,settingsValue:a}=e.hideWhen;return a===(O.state&&O.state[t])?{display:"none"}:{}}class it extends r.a.Component{componentDidMount(){this.subscriptions=[],this.subscriptions.push(O.subscribe((()=>this.forceUpdate())))}shouldComponentUpdate(e){return e.currentSettings.join(",")!==this.props.currentSettings.join(",")}componentWillUnmount(){Array.isArray(this.subscriptions)&&this.subscriptions.forEach((e=>e.unsubscribe()))}fieldForMapping({mapping:e,fieldBase:t,key:a,d2:s}){switch(e.type){case"textfield":case void 0:return Object.assign({},t,{props:Object.assign({},t.props,{changeEvent:"onBlur",multiLine:!!e.multiLine})});case"password":return Object.assign({},t,{props:Object.assign({},t.props,{type:"password",changeEvent:"onBlur",autoComplete:"new-password"})});case"dropdown":return e.includeEmpty&&""===t.value&&(t.value="null"),Object.assign({},t,{component:X,props:Object.assign({},t.props,{menuItems:e.source?S.state&&S.state[e.source]||[]:Object.entries(e.options).map((([e,t])=>({id:e,displayName:isNaN(t)?s.i18n.getTranslation(t):t}))),includeEmpty:!!e.includeEmpty,emptyLabel:e.includeEmpty&&e.emptyLabel&&s.i18n.getTranslation(e.emptyLabel)||void 0,noOptionsLabel:s.i18n.getTranslation("no_options")})});case"checkbox":return Object.assign({},t,{component:G,props:{label:t.props.floatingLabelText,sectionLabel:e.sectionLabel&&s.i18n.getTranslation(e.sectionLabel)||void 0,style:t.props.style,onCheck:(e,t)=>{N.saveKey(a,t?"true":"false")}}});case"staticContent":return O.state?Object.assign({},t,{component:ue,props:{label:t.props.floatingLabelText,name:e.name,isEnabled:Object.hasOwnProperty.call(O.state,a),value:"true"===t.value||!0===t.value}}):null;case"oauth2clients":return Object.assign({},t,{component:et});case"postButton":return Object.assign({},t,{component:i.c,props:{children:t.props.floatingLabelText,onClick:()=>{s.Api.getApi().post(e.uri).then((e=>{N.load(!0),N.showSnackbarMessage(e.message)})).catch((e=>{N.showSnackbarMessage(e.message)}))}}});case"localizedAppearance":return Object.assign({},t,{component:_e});case"metadataSettings":return Object.assign({},t,{component:Fe});default:return console.warn(`Unknown control type "${e.type}" encountered for field "${a}"`),{}}}renderFields(e){const t=this.context.d2;if(0===e.length)return r.a.createElement("div",{style:st.noHits},t.i18n.getTranslation("no_settings_matched_the_search_term"));const a=e.map((e=>{const a=_[e],s=[];a.validators&&a.validators.forEach((e=>{P.c.has(e)&&s.push({validator:P.c.get(e),message:t.i18n.getTranslation(P.c.get(e).message)})}));const n={name:e,value:O.state&&O.state[e]||"",component:ke,props:{floatingLabelText:t.i18n.getTranslation(a.label),style:{width:"100%",...nt(a)},hintText:a.hintText&&t.i18n.getTranslation(a.hintText)},validators:s};return this.fieldForMapping({mapping:a,fieldBase:n,key:e,d2:t})})).filter((e=>e&&!!e.name)).map((e=>{const t=_[e.name],a=S.getState();if(t.userSettingsOverride){const s=a&&a.userSettingsNoFallback||{},n=s&&null!==s[e.name]?s[e.name]:"",i=function({component:e,valueLabel:t}){return class extends e{render(){const a=Object.assign({},st.userSettingsOverride);e===G&&(a.top=-8);const s=t?`${l.a.t("This setting will be overridden by the current user setting: {{settingName}}",{settingName:t,nsSeparator:null})}`:l.a.t("This setting can be overridden by user settings");return r.a.createElement("div",{style:{marginRight:48}},super.render(),r.a.createElement("div",{style:a},r.a.createElement(D.a,{iconClassName:"material-icons",tooltip:s,tooltipPosition:"bottom-left",iconStyle:{color:re.rawTheme.palette.primary1Color},tooltipStyles:{fontSize:".75rem",marginRight:32,marginTop:-32}},"info_outline")))}}}({component:e.component,valueLabel:t.source?(a&&a[t.source]||[]).filter((e=>e.id===n)).map((e=>e.displayName)).pop():n});return Object.assign(e,{component:i})}return e}));return r.a.createElement(i.d,{className:at.a.card,key:this.props.category},r.a.createElement(F.a,{fields:a,onUpdateField:N.saveKey}))}render(){return r.a.createElement("div",{className:"content-area"},r.a.createElement("div",{style:st.header},w[this.props.category]?w[this.props.category].pageLabel:l.a.t("Search results")),this.renderFields(this.props.currentSettings))}}it.contextTypes={d2:b.a.object.isRequired};var ot=it;function rt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lt extends r.a.Component{constructor(e,t){super(e,t),rt(this,"closeSnackbar",(()=>{this.setState({showSnackbar:!1})})),rt(this,"doSearch",(e=>{this.setState({searchText:e}),N.searchSettings(e)})),this.state={category:C[0],currentSettings:w[C[0]].settings,snackbarMessage:"",showSnackbar:!1,formValidator:void 0},this.sidebarRef=r.a.createRef()}getChildContext(){return{d2:this.props.d2,muiTheme:re}}componentDidMount(){N.load(),this.subscriptions=[],this.subscriptions.push(S.subscribe((()=>{this.forceUpdate()}))),this.subscriptions.push(N.setCategory.subscribe((e=>{const t=e.data.key||e.data||C[0],a=e.data.settings||[],s="search"===t?a:w[t].settings;"search"!==t&&this.sidebarRef.current.clearSearchBox();const n=`/${t}`,i="search"===t?`?${encodeURIComponent(e.data.searchTerms.join(" "))}`:"";n===this.history.location.pathname&&i===this.history.location.search||this.history.push({pathname:n,search:i}),this.setState({category:t,currentSettings:s,searchText:"search"===t?this.state.searchText:""})}))),this.subscriptions.push(N.showSnackbarMessage.subscribe((e=>{const t=e.data;this.setState({snackbarMessage:t,showSnackbar:!!t})})));const e=e=>{const t=e.pathname.substr(1);if("/search"===e.pathname){const t=decodeURIComponent(e.search.substr(1));this.doSearch(t)}else Object.keys(w).includes(t)?N.setCategory(t):(this.history.replace(`/${C[0]}`),N.setCategory(C[0]))};this.history=d()(),this.unlisten=this.history.listen(((t,a)=>{"POP"===a&&e(t)})),e(this.history.location)}componentWillUnmount(){this.subscriptions.forEach((e=>{e.unsubscribe()})),"function"===typeof this.unlisten&&this.unlisten()}render(){const e=Object.keys(w).map((e=>({key:e,label:this.props.d2.i18n.getTranslation(w[e].label),icon:w[e].icon})));return r.a.createElement(y.a,{muiTheme:re},r.a.createElement("div",null,r.a.createElement(u.a,{message:this.state.snackbarMessage||"",autoHideDuration:1250,open:this.state.showSnackbar,onRequestClose:this.closeSnackbar}),r.a.createElement("div",{className:v.a.contentWrap},r.a.createElement(c.a,{sections:e,onChangeSection:N.setCategory,currentSection:this.state.category,showSearchField:!0,searchFieldLabel:l.a.t("Search settings"),ref:this.sidebarRef,onChangeSearchText:this.doSearch,searchText:this.state.searchText}),r.a.createElement("form",{autoComplete:"off",className:v.a.contentArea},r.a.createElement(ot,{category:this.state.category,currentSettings:this.state.currentSettings})))))}}lt.contextTypes={muiTheme:b.a.object},lt.childContextTypes={d2:b.a.object,muiTheme:b.a.object};var ct=lt,pt=(a(1241),a(1242));l.a.addResources("en","default",pt);var dt=l.a;const ht={indicatorGroups:{resource:"indicatorGroups",params:{paging:!1,fields:"id,displayName",order:"displayName:asc"}},dataElementGroups:{resource:"dataElementGroups",params:{paging:!1,fields:"id,displayName",order:"displayName:asc"}},userGroups:{resource:"userGroups",params:{paging:!1,fields:"id,displayName",order:"displayName:asc"}},organisationUnitLevels:{resource:"organisationUnitLevels",params:{paging:!1,fields:"id,level,displayName",order:"level:asc"}},userRoles:{resource:"userRoles",params:{paging:!1,fields:"id,displayName",order:"displayName:asc"}},organisationUnits:{resource:"organisationUnits",params:{paging:!1,fields:"id,displayName",filter:["level:in:[1,2]"]}},apps:{resource:"action::menu/getModules"},flags:{resource:"system/flags"},styles:{resource:"system/styles"},uiLocales:{resource:"locales/ui"},dbLocales:{resource:"locales/db"},userSettingsNoFallback:{resource:"userSettings",params:{useFallback:!1}}};t.default=()=>{const{d2:e}=Object(n.a)(),{loading:t,error:a,data:o}=Object(s.d)(ht);if(a)return r.a.createElement(i.e,null,r.a.createElement("p",null,dt.t("Failed to load: {{error}}",{error:a.message,nsSeparator:null})));if(!e||t)return r.a.createElement(i.e,null,r.a.createElement(i.f,null));const{indicatorGroups:l,dataElementGroups:c,userGroups:p,organisationUnitLevels:d,userRoles:h,organisationUnits:u,userSettingsNoFallback:m}=o,y=(o.apps.modules||[]).map((e=>({id:"../"===e.defaultAction.substr(0,3)?e.name:`app:${e.name}`,displayName:e.displayName||e.name}))),g=(o.flags||[]).map((e=>({id:e.key,displayName:e.name})));g.unshift({id:"dhis2",displayName:dt.t("No flag")});const b=(o.styles||[]).map((e=>({id:e.path,displayName:e.name}))),f=(o.uiLocales||[]).map((e=>({id:e.locale,displayName:e.name}))),v=(o.dbLocales||[]).map((e=>({id:e.locale,displayName:e.name})));return S.setState({indicatorGroups:l.indicatorGroups,dataElementGroups:c.dataElementGroups,userGroups:p.userGroups,organisationUnitLevels:d.organisationUnitLevels,userRoles:h.userRoles,organisationUnits:u.organisationUnits,startModules:y,flags:g,styles:b,uiLocales:f,dbLocales:v,userSettingsNoFallback:m}),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{spacers:!0,colors:!0}),r.a.createElement(ct,{d2:e}))}},740:function(e,t,a){e.exports={contentWrap:"App_contentWrap__LkWn-",contentArea:"App_contentArea__4AZNb"}}}]);
//# sourceMappingURL=app.f9c53bce.chunk.js.map